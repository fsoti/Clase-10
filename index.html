<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Clase 10! :)</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chartist/0.11.4/chartist.min.css" />
        <link rel="icon" type="image/png" href="https://diseno.uc.cl/favicon.png" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chartist/0.11.4/chartist.min.js"></script>
        <style>
            body {
                background-color: #99E89D;
                color: #06122c;
            }
            em {
                font-style: normal;
                font-weight: bold;
                text-decoration: underline;
            }
            span {
                font-weight: bolder;
            }
            .ct-series-a .ct-line,
            .ct-series-a .ct-point {
                stroke: #1b397c;
            }
        </style>
    </head>
    <body>
        
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 mx-auto" style="background: rgb(6, 18, 43);">
                    <img src="https://diseno.uc.cl/wp-content/themes/dno/img/escuela-de-diseno-uc.svg" class="w-25 mx-auto d-block mt-4" alt="logo" />
                </div>
                <div class="col-12 mx-auto" style="background: rgb(6, 18, 43);">
                    <h2 class="fs-6 mt-4 text-center" style="color: whitesmoke; opacity: 60%;">Narrativa</h2>
                    <h1 class="ms-2 my-4 text-center" style="color: whitesmoke;"><span>diseño</span>uc</h1>
                    <h3 class="ms-2 fs-6 my-4 text-center" style="color: whitesmoke;">
                        Memorias de Proyecto de Título en el ámbito de SUSTENTABILIDAD
                    </h3>
                </div>
                <div class="col-12 mx-auto">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 1500"> <rect fill="#FFFFFF" id="background"/><g id="viz"> <g transform="translate(0,0)"> <g id="pie" transform="translate(80.5,79)"> <path fill="rgb(0, 0, 0)" stroke="#FFFFFF" d="M4.225031457058369e-15,-69A69,69,0,1,1,-4.225031457058369e-15,69A69,69,0,1,1,4.225031457058369e-15,-69M-1.0838124172454075e-14,-59A59,59,0,1,0,1.0838124172454075e-14,59A59,59,0,1,0,-1.0838124172454075e-14,-59Z"/> </g> <text y="6" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">VILLELA, A.</text></g> <g transform="translate(161,0)"> <g id="pie" transform="translate(80.5,79)"> <path fill="rgb(0, 0, 0)" stroke="#FFFFFF" d="M3.6589845736009285e-15,-59.75575286112626A59.75575286112626,59.75575286112626,0,1,1,-3.6589845736009285e-15,59.75575286112626A59.75575286112626,59.75575286112626,0,1,1,3.6589845736009285e-15,-59.75575286112626M-9.139983522081754e-15,-49.75575286112626A49.75575286112626,49.75575286112626,0,1,0,9.139983522081754e-15,49.75575286112626A49.75575286112626,49.75575286112626,0,1,0,-9.139983522081754e-15,-49.75575286112626Z"/></g><text y="15.244247138873739" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">CARO, I.</text></g> <g transform="translate(322,0)"> <g id="pie" transform="translate(80.5,79)"> <path fill="rgb(0, 0, 0)" stroke="#FFFFFF" d="M3.6589845736009285e-15,-59.75575286112626A59.75575286112626,59.75575286112626,0,1,1,-3.6589845736009285e-15,59.75575286112626A59.75575286112626,59.75575286112626,0,1,1,3.6589845736009285e-15,-59.75575286112626M-9.139983522081754e-15,-49.75575286112626A49.75575286112626,49.75575286112626,0,1,0,9.139983522081754e-15,49.75575286112626A49.75575286112626,49.75575286112626,0,1,0,-9.139983522081754e-15,-49.75575286112626Z"/></g> <text y="15.244247138873739" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">VIVANCO, T.</text> </g> <g transform="translate(483,0)"> <g id="pie" transform="translate(80.5,79)"> <path fill="rgb(0, 0, 0)" stroke="#FFFFFF" d="M2.987548394012452e-15,-48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,-2.987548394012452e-15,48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,2.987548394012452e-15,-48.79036790187178M-7.125674983316327e-15,-38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,7.125674983316327e-15,38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,-7.125674983316327e-15,-38.79036790187178Z"/></g> <text y="26.209632098128218" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">ALLARD, J.</text></g> <g transform="translate(644,0)"><g id="pie" transform="translate(80.5,79)"> <path fill="rgb(0, 0, 0)" stroke="#FFFFFF" d="M2.987548394012452e-15,-48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,-2.987548394012452e-15,48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,2.987548394012452e-15,-48.79036790187178M-7.125674983316327e-15,-38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,7.125674983316327e-15,38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,-7.125674983316327e-15,-38.79036790187178Z"/> </g> <text y="26.209632098128218" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">FIGUEROA, B.</text> </g> <g transform="translate(0,150)"> <g id="pie" transform="translate(80.5,79)"> <path fill="rgb(0, 0, 0)" stroke="#FFFFFF" d="M2.987548394012452e-15,-48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,-2.987548394012452e-15,48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,2.987548394012452e-15,-48.79036790187178M-7.125674983316327e-15,-38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,7.125674983316327e-15,38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,-7.125674983316327e-15,-38.79036790187178Z"/> </g><text y="26.209632098128218" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">HERNÁNDEZ, R.</text></g><g transform="translate(161,150)"><g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.987548394012452e-15,-48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,-2.987548394012452e-15,48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,2.987548394012452e-15,-48.79036790187178M-7.125674983316327e-15,-38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,7.125674983316327e-15,38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,-7.125674983316327e-15,-38.79036790187178Z"
                                />
                            </g>
                            <text y="26.209632098128218" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">JELVEZ, P.</text>
                        </g>
                        <g transform="translate(322,150)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.987548394012452e-15,-48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,-2.987548394012452e-15,48.79036790187178A48.79036790187178,48.79036790187178,0,1,1,2.987548394012452e-15,-48.79036790187178M-7.125674983316327e-15,-38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,7.125674983316327e-15,38.79036790187178A38.79036790187178,38.79036790187178,0,1,0,-7.125674983316327e-15,-38.79036790187178Z"
                                />
                            </g>
                            <text y="26.209632098128218" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">MOLLENHAUER, K.</text>
                        </g>
                        <g transform="translate(483,150)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">AMENABAR, A.</text>
                        </g>
                        <g transform="translate(644,150)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">CARDENAS, L.</text>
                        </g>
                        <g transform="translate(0,300)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">CIRAVEGNA, E.</text>
                        </g>
                        <g transform="translate(161,300)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">DE LOS RIOS, P.</text>
                        </g>
                        <g transform="translate(322,300)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">DURAN, A.</text>
                        </g>
                        <g transform="translate(483,300)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">GONZÁLEZ, A.</text>
                        </g>
                        <g transform="translate(644,300)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">MONROY, F.</text>
                        </g>
                        <g transform="translate(0,450)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">SILVA, Z.</text>
                        </g>
                        <g transform="translate(161,450)">
                            <g id="pie" transform="translate(80.5,79)">
                                <path
                                    fill="rgb(0, 0, 0)"
                                    stroke="#FFFFFF"
                                    d="M2.1125157285291845e-15,-34.5A34.5,34.5,0,1,1,-2.1125157285291845e-15,34.5A34.5,34.5,0,1,1,2.1125157285291845e-15,-34.5M-4.500576986866523e-15,-24.5A24.5,24.5,0,1,0,4.500576986866523e-15,24.5A24.5,24.5,0,1,0,-4.500576986866523e-15,-24.5Z"
                                />
                            </g>
                            <text y="40.5" x="80.5" style="font-family: Arial, sans-serif; font-size: 12px; fill: black; font-weight: bold; dominant-baseline: auto; text-anchor: middle;">WUTH, P.</text>
                        </g>
                    </g>
                    <g id="legend" transform="translate(805,10)">
                        <g transform="translate(5,0)">
                            <g class="legendSize" transform="translate(0,0)">
                                <g class="legendCells" transform="translate(69,15.5)">
                                    <g class="cell" transform="translate(0, 35)">
                                        <circle class="swatch" r="35" fill="none" stroke="#ccc" />
                                        <text class="label" transform="translate( 74,&#10;          5)" font-family='"Arial", sans-serif' font-size="10px"><tspan x="0" dy="0em">1.0</tspan></text>
                                    </g>
                                    <g class="cell" transform="translate(0, 174)">
                                        <circle class="swatch" r="69" fill="none" stroke="#ccc" />
                                        <text class="label" transform="translate( 74,&#10;          5)" font-family='"Arial", sans-serif' font-size="10px"><tspan x="0" dy="0em">4.0</tspan></text>
                                    </g>
                                </g>
                                <text class="legendTitle" font-family='"Arial", sans-serif' font-size="12px" font-weight="bold"><tspan x="0" dy="0em">Area</tspan></text>
                            </g>
                            <g class="legendColor" transform="translate(0,291)">
                                <g class="legendCells" transform="translate(0,15.5)">
                                    <g class="cell" transform="translate(0, 0)">
                                        <rect class="swatch" height="15" width="15" style="fill: rgb(0, 0, 0);" />
                                        <text class="label" transform="translate( 20, 12.5)" font-family='"Arial", sans-serif' font-size="10px"><tspan x="0" dy="0em">Cantidad de Títulos</tspan></text>
                                    </g>
                                </g>
                                <text class="legendTitle" font-family='"Arial", sans-serif' font-size="12px" font-weight="bold"><tspan x="0" dy="0em">Arcs colors</tspan></text>
                            </g>
                        </g>
                    </g>
                </svg>
                </div>
                
                <div class="col-md-6">
                    <div class="card my-2 shadow-sm" style="border-color: #495a7f;">
                        <div class="card-header" style="background: #495a7f; color: whitesmoke;">
                            Notas promedio prof. guía
                        </div>
                        <div class="card-body">
                            <p>A continuación solo se muestran las notas que están en o por el promedio general de <span id="corte"></span></p>
                            <svg id="aqui"></svg>
                        </div>
                    </div>

                    <div class="card my-2 shadow-sm" style="border-color: #495a7f;">
                        <div class="card-header" style="background: #495a7f; color: whitesmoke;">
                            Palabras habituales en el ámbito
                        </div>

                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card my-2 shadow-sm" style="border-color: #495a7f;">
                        <div class="card-header" style="background: #495a7f; color: whitesmoke;">
                            Memorias en el ámbito
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-bordered table-light table-hover small caption-top" style="border-color: #495a7f;">
                                    <caption>
                                        * Se muestran solo las notas igual o mayor a 6.5
                                    </caption>
                                    <thead class="table-primary">
                                        <tr>
                                            <th scope="col" class="text-center" style="background-color: #1b397c; color: whitesmoke;">#</th>
                                            <th scope="col" style="width: 20%; background-color: #1b397c; color: whitesmoke;">Autor(a)</th>
                                            <th scope="col" style="background-color: #1b397c; color: whitesmoke;">Año</th>
                                            <th scope="col" style="width: 40%; background-color: #1b397c; color: whitesmoke;">Título</th>
                                            <th scope="col" style="background-color: #1b397c; color: whitesmoke;">Ámbito</th>
                                            <th scope="col" style="background-color: #1b397c; color: whitesmoke;">Prof. Guía</th>
                                            <th scope="col" class="text-center" style="background-color: #1b397c; color: whitesmoke;">Nota</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="card my-2 shadow-sm mb-4">
                        <div class="card-header">
                            Progresión de notas promedio de todas las memorias
                        </div>
                        <div class="card-body">
                            <div class="ct-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            const aqui = document.querySelector("tbody");
            const visualizacion = document.querySelector("#aqui");
            const palabreo = document.querySelector("#palabreo");

            async function datos(criterio) {
                var seleccion = [];
                var profes = [];
                var nombres = [];
                var barras = [];
                var ambitos = [];
                const consulta = await fetch("https://raw.githubusercontent.com/profesorfaco/dno097-2024/main/clase-06/data.json");
                const data = await consulta.json();
                console.log("Lo que sigue son todos los datos:");
                console.log(data);
                //Trabajando con 1400 elementos en el arreglo
                data.forEach((d) => {
                    d.nota_titulo = parseFloat(d.nota_titulo.replace(",", "."));
                    d.nota_pga = parseFloat(d.nota_pga.replace(",", "."));
                    d.nota_seminario = parseFloat(d.nota_seminario.replace(",", "."));
                    d.year = Number(d.year);
                    d.pdf_ok = Number(d.pdf_ok);
                    d.ambito = d.ambito.replace("Entrenimiento", "Entretenimiento");
                    if (d.ambito.includes(criterio) && d.pdf_ok == 1) {
                        seleccion.push(d);
                    }
                    /* if (d.nota_titulo >= 6,5){
                        seleccion.push(d);
                    }*/
                });
                console.log("Lo que sigue es una selección de los datos:");
                console.log(seleccion);
                //Trabajando con una selección
                seleccion.forEach((s, i) => {
                    if (6.5 <= s.nota_titulo.toFixed(1)) {
                        aqui.innerHTML += `<tr><td class="text-center">${i + 1}</td><td>${s.nombre_paterno} ${s.nombre_materno}, ${s.nombre_pila[0]}.</td><td>${s.year}</td><td><a href="https://diseno.uc.cl/memorias/pdf/${
                            s.nombre_pdf
                        }" class="link-dark" target="_blank">${s.nombre_proyecto}</a> <svg width="1em" height="1em"><use href="#pdf"></use></svg></td><td>${s.ambito}</td><td>${s.nombre_guia}</td><td class="text-center">${s.nota_titulo.toFixed(
                            1
                        )}</td></tr>`;
                    }
                    let obj = {};
                    obj["prof"] = `${s.nombre_guia}`;
                    obj["nota"] = `${s.nota_titulo.toFixed(1)}`;
                    profes.push(obj);
                    nombres.push(s.nombre_guia);
                });
                /*
                    En el seleccion.forEach hice 3 cosas
                    1ra. llenar el tbody
                    2da. empujar objetos a la variable profes
                    3ra. empujar strings a la variable nombres
                */
                console.log("Lo que sigue son sólo los nombres, sin repetir:");
                nombres = [...new Set(nombres)].sort();
                console.log(nombres);
                //Basándome en nombres, trabajo con profes
                nombres.forEach((x) => {
                    //prof sin repetir
                    let unProf = profes.filter((p) => p.prof === x);
                    //promedio de notas de cada prof
                    let average = unProf.reduce((a, b) => a + Number(b.nota), 0) / unProf.length;
                    let obj = {};
                    obj["prof"] = x;
                    obj["promedio"] = Number(average);
                    barras.push(obj);
                });
                console.log("Lo que sigue son promedios para cada nombre:");
                console.log(barras);
                //Forma más "clásica" de sacar promedio
                var i = 0;
                var total = 0;
                barras.forEach((barra) => {
                    total += barra.promedio;
                    i++;
                });
                var corte = total / i;
                document.querySelector("#corte").innerHTML = corte.toFixed(2);
                var ajuste = 0;
                let mayor = 0;
                barras.forEach((x) => {
                    mayor = Math.max(mayor, x.promedio);
                    if (x.promedio >= corte) {
                        visualizacion.innerHTML += `<g transform="translate(0 ${ajuste * 3})"><rect x="0" y="0" height="2" width="70" fill="#eee"></rect><rect x="0" y="0" height="2" width="${
                            x.promedio.toFixed(1) * 10
                        }" fill="#1B397C"></rect><text fill="white" font-size="1.2" x="0.5" y="1.4">${x.prof}</text><text fill="white" font-size="1.2" x="${x.promedio.toFixed(1) * 10 - 2.5}" y="1.4">${x.promedio.toFixed(1)}</text></g>`;
                        ajuste++;
                    }
                });
                visualizacion.innerHTML += `<line x1="${mayor.toFixed(1) * 10}" y1="0" x2="${mayor.toFixed(1) * 10}" y2="${ajuste * 3}" stroke="white" stroke-width="0.1"/>`;
                var proporcion = "0 0 70 " + ajuste * 3;
                visualizacion.setAttribute("viewBox", proporcion);
                //Buscando las palabras frecuentes del "para qué" en su selección
                var words = "";
                seleccion.forEach((s) => (words = words + " " + s.para_que));
                var palabras = words.split(" ");
                palabras = palabras.sort();
                
                c

            datos("Alimentación").catch((error) => console.error(error));

            document.querySelector("select").addEventListener("change", (event) => {
                aqui.innerHTML = " ";
                visualizacion.innerHTML = " ";
                palabreo.innerHTML = " ";
                console.clear();
                var seleccion = [];
                var profes = [];
                var nombres = [];
                var barras = [];
                var ambitos = [];
                datos(event.target.value).catch((error) => console.error(error));
            });
        </script>
        <script>
            //promedio por año
            new Chartist.Line(
                ".ct-chart",
                {
                    labels: [2016, 2017, 2018, 2019, 2020, 2021, 2022],
                    series: [[6.8, 6.5, 6.8, 6.7, 6.9, 6.6, 7]],
                },
                {
                    axisY: {
                        offset: 50,
                    },
                }
            );
        </script>
    </body>
</html>
